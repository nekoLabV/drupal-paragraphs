(function(e){"use strict";const y={countdown:()=>Promise.resolve().then(()=>$),timeline:()=>Promise.resolve().then(()=>Z),textWithEmbed:()=>Promise.resolve().then(()=>te)},w=async(n,t,s)=>{if(!y[n]){console.error(`组件 ${n} 未注册`);return}const m=await y[n](),r=e.createApp(m.default||m,s);return r.mount(t),r};typeof window<"u"&&(window.vueMountComponent=w),setTimeout(()=>{window.dispatchEvent(new Event("baseThemeHooks:load"))},300);const E={class:"base-theme-countdown__container"},T={class:"base-theme-countdown-item__num"},x={class:"base-theme-countdown-item__text"},$=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"countdown",props:{start:String,end:{type:String,required:!0},text:{type:String,default:"Day|Hour|Min|Sec"},countdownStyle:{type:String,default:"block"}},emits:["countdownEnd"],setup(n,{emit:t}){const s=n,m=t,r=e.ref(!1),a=(l,p,u)=>Number(l)!=1?u:p,_=l=>/^[\u4e00-\u9fa5]+$/.test(l),i=l=>/^[A-Z]$/.test(l),h=l=>_(l)?l:l+(i(l.substr(1,1))?"S":"s"),k=l=>{let[p,u,f,S]=[0,0,0,0];l>0&&(p=parseInt(l/60/60/24),u=parseInt(l/60/60%24),f=parseInt(l/60%60),S=parseInt(l%60));const ne=oe=>String(oe).padStart(2,"0");return[p,u,f,S].map(ne)},b=e.ref(0),c=e.ref([]),d=e.ref([]),o=e.computed(()=>k(b.value)),g=(l,p)=>a(Number(l),c.value[p],d.value[p]);return e.onMounted(()=>{if(r.value=!0,!s.end){console.error("Countdown end time is required."),m("countdownEnd");return}const l=new Date(s.end).getTime(),p=s.start?new Date(s.start).getTime():Date.now();if(b.value=Math.floor((l-p)/1e3),b.value<=0){m("countdownEnd");return}c.value=s.text.split("|").map(f=>f.trim()),d.value=c.value.map(h);const u=setInterval(()=>{b.value<=0&&(clearInterval(u),m("countdownEnd")),b.value--},1e3);e.onUnmounted(()=>clearInterval(u))}),(l,p)=>r.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["base-theme-countdown",`base-theme-countdown--style-${n.countdownStyle}`])},[e.createElementVNode("div",E,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(u,f)=>(e.openBlock(),e.createElementBlock("div",{key:f,class:"base-theme-countdown-item"},[e.createElementVNode("span",T,e.toDisplayString(u),1),e.createElementVNode("span",x,e.toDisplayString(g(u,f)),1)]))),128))])],2)):e.createCommentVNode("",!0)}}},Symbol.toStringTag,{value:"Module"})),C=["data-node-type"],N={class:"btn__label"},B={__name:"CallToActionBtn",props:{type:{type:String,required:!0},text:String,size:String,btnStyle:{type:String,default:"outline-primary"},href:String,target:String,downloadFileName:{type:String,default:""},nodeType:String,iconSettings:{type:Object,default:()=>({custom_icon:"",show_icon:!0,icon_position:"before"})}},setup(n){const t=n,s=e.computed(()=>t.iconSettings.show_icon),m=e.computed(()=>t.iconSettings.custom_icon?"ri-"+t.iconSettings.custom_icon:""),r=e.computed(()=>t.iconSettings.icon_position),a=e.computed(()=>{let{href:h}=t;return h.startsWith("http")||h.startsWith("/")?h:h="/"+h}),_={link:()=>({href:a.value,target:t.target||t.href.startsWith("http")?"_blank":"_self","data-node-type":t.nodeType}),mail:()=>({href:`mailto:${t.href}`,target:t.target}),phone:()=>({href:`tel:${t.href}`,target:t.target}),sms:()=>({href:`sms:${t.href}`,target:t.target}),download:()=>({href:t.href,download:t.downloadFileName,target:"_blank"})},i=e.computed(()=>_[t.type]?.()||{});return(h,k)=>n.text&&n.href?(e.openBlock(),e.createElementBlock("a",e.mergeProps({key:0,class:"btn"},i.value,{class:`btn--${n.btnStyle} ${n.size?`btn--${n.size}`:""}`,"data-node-type":n.nodeType}),[s.value&&r.value==="before"?(e.openBlock(),e.createElementBlock("i",{key:0,class:e.normalizeClass(["btn__icon",m.value||`btn__icon--${n.type}`])},null,2)):e.createCommentVNode("",!0),e.createElementVNode("span",N,e.toDisplayString(n.text),1),s.value&&r.value==="after"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["btn__icon",m.value||`btn__icon--${n.type}`])},null,2)):e.createCommentVNode("",!0)],16,C)):e.createCommentVNode("",!0)}},V={class:"base-theme-timeline"},L={class:"base-theme-timeline__tools"},M={class:"base-theme-timeline__dropdown-menu"},D=["onClick"],P=["innerHTML"],z={key:0,class:"base-theme-timeline__dates"},H=["onClick"],j={key:0,class:"base-theme-timeline-item__time"},F={key:1,class:"base-theme-timeline-item__hint-text"},A={class:"base-theme-timeline-item__primary"},I={key:0,class:"base-theme-timeline-item__title"},O={key:1,class:"base-theme-timeline-item__subtitle"},J=["innerHTML"],q={key:3,class:"base-theme-timeline-item__tags"},W={key:4,class:"base-theme-links base-theme-links--direction-row base-theme-timeline-item__actions",style:{"justify-content":"inherit"}},Z=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"timeline",props:{items:{type:Array,default:()=>[]},buttonStyle:{type:String,default:"outline-primary"},allTags:{type:String,default:"All"},results:{type:String,default:"@count results"}},setup(n){const t=n,s=e.ref(),m=e.computed(()=>{const c=[...new Set(t.items?.map(d=>d.date))].filter(Boolean);return s.value=c?.[0],c}),r=c=>{s.value=c},a=e.ref(),_=e.computed(()=>{const c=[...new Set(t.items?.reduce((d,o)=>d.concat(o.tags),[]))].filter(Boolean);return c?.unshift(t.allTags),a.value=c?.[0],c}),i=e.ref(!0),h=()=>{setTimeout(()=>{i.value=!0},300)},k=e.computed(()=>t.items?.filter(c=>a.value===t.allTags?c.date===s.value:c.date===s.value&&c.tags.includes(a.value))),b=e.computed(()=>t.results.replace("@count",`<span class="base-theme-timeline__results-num">${k.value?.length}</span>`));return(c,d)=>(e.openBlock(),e.createElementBlock("div",V,[e.createElementVNode("div",L,[_.value?.length?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["base-theme-timeline__dropdown",{"base-theme-timeline__dropdown-menu--hidden":i.value}])},[e.createElementVNode("input",{type:"text",class:"base-theme-timeline__control",onFocus:d[0]||(d[0]=()=>{i.value=!1}),onBlur:h},null,32),e.createTextVNode(" "+e.toDisplayString(a.value)+" ",1),d[1]||(d[1]=e.createStaticVNode('<div class="base-theme-timeline__dropdown-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="18" height="18" viewBox="0 0 18 18"><defs><clipPath id="master_svg0_745_72570/556_024318"><rect x="0" y="0" width="18" height="18" rx="0"></rect></clipPath></defs><g clip-path="url(#master_svg0_745_72570/556_024318)"><g><path d="M9,12L4.5,7.5L13.5,7.5L9,12Z" fill="#666666" fill-opacity="1"></path></g></g></svg></div>',1)),e.createElementVNode("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{key:g,class:e.normalizeClass(["base-theme-timeline__dropdown-menu__item",{"base-theme-timeline__dropdown-menu__item--active":o===a.value}]),onClick:l=>a.value=o},e.toDisplayString(o),11,D))),128))])],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"base-theme-timeline__results",innerHTML:b.value},null,8,P)]),m.value?.length?(e.openBlock(),e.createElementBlock("div",z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(m.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["base-theme-timeline__dates-item",{"base-theme-timeline__dates-item--active":o===s.value}]),key:g,onClick:l=>r(o)},e.toDisplayString(o),11,H))),128))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{class:"base-theme-timeline-item",key:g},[o?.startTime&&o?.endTime?(e.openBlock(),e.createElementBlock("div",j,e.toDisplayString(`${o.startTime}-${o.endTime}`),1)):(e.openBlock(),e.createElementBlock("div",F,e.toDisplayString(o.hintText),1)),e.createElementVNode("div",A,[d[2]||(d[2]=e.createElementVNode("div",{class:"base-theme-timeline-item__tail"},null,-1)),d[3]||(d[3]=e.createElementVNode("div",{class:"base-theme-timeline-item__node"},null,-1)),o?.title?(e.openBlock(),e.createElementBlock("div",I,e.toDisplayString(o.title),1)):e.createCommentVNode("",!0),o?.subTitle?(e.openBlock(),e.createElementBlock("div",O,e.toDisplayString(o.subTitle),1)):e.createCommentVNode("",!0),o?.description?(e.openBlock(),e.createElementBlock("div",{key:2,innerHTML:o.description,class:"base-theme-timeline-item__description"},null,8,J)):e.createCommentVNode("",!0),o?.tags?.length?(e.openBlock(),e.createElementBlock("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.tags,(l,p)=>(e.openBlock(),e.createElementBlock("div",{class:"base-theme-timeline-item__tags-item",key:p},e.toDisplayString(l),1))),128))])):e.createCommentVNode("",!0),o?.buttons?.length?(e.openBlock(),e.createElementBlock("div",W,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.buttons,(l,p)=>(e.openBlock(),e.createBlock(B,e.mergeProps({ref_for:!0},l,{key:p,"btn-style":n.buttonStyle}),null,16,["btn-style"]))),128))])):e.createCommentVNode("",!0)])]))),128))]))}}},Symbol.toStringTag,{value:"Module"})),U=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R=["innerHTML"],G={__name:"LongText",props:{html:String,className:{type:String,default:""}},setup(n){return(t,s)=>n.html?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cm-richtext",n.className]),innerHTML:n.html},null,10,R)):e.createCommentVNode("",!0)}},K={__name:"Richtext",props:{html:{type:String,required:!0},fullTable:{type:Boolean,default:!1},simpleTable:{type:Boolean,default:!1}},setup(n){const t=n,s=e.computed(()=>t.fullTable?t.html.replace(/<table([^>]*)>/g,'<div class="table-responsive"><table$1>').replace(/<\/table>/g,"</table></div>"):t.html);return(m,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["base-theme-richtext",{"base-theme-richtext--full-table":n.fullTable,"base-theme-richtext--simple-table":n.simpleTable}])},[e.createVNode(G,{class:"change-theme-primary",html:s.value},null,8,["html"])],2))}},Q={class:"base-theme-text-with-embedding__grid"},X={class:"base-theme-text-with-embedding__embed"},Y=["innerHTML"],v={class:"base-theme-text-with-embedding__text"},ee={key:0,class:"base-theme-links base-theme-links--direction-row",style:{"justify-content":"inherit"}},te=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"TextWithEmbed",props:{loadJS:String,runJS:String,embedHtml:String,richtext:String,buttons:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},setup(n){const t=n;e.watch(()=>t,()=>{console.log("text1 props",t)},{immediate:!0});const s=e.computed(()=>{const r=["base-theme-text-with-embedding"];for(let[a,_]of Object.entries(t.settings))a!=="buttonStyle"&&(a=U(a),r.push(`${r[0]}--${a}-${_}`));return r.join(" ")}),m=r=>new Promise((a,_)=>{let i=document.querySelector(`script[src='${r}']`);i||(i=document.createElement("script"),i.type="text/javascript",i.src=r,document.body.appendChild(i)),i.addEventListener("load",()=>a(i)),i.addEventListener("error",h=>_(h))});return e.onMounted(async()=>{try{t.loadJS&&await m(t.loadJS),t.runJS&&new Function(t.runJS)()}catch(r){console.error("脚本执行失败:",r)}}),(r,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(s.value)},[e.createElementVNode("div",Q,[e.createElementVNode("div",X,[e.createElementVNode("div",{class:"el-ratio",innerHTML:n.embedHtml},null,8,Y)]),e.createElementVNode("div",v,[e.createVNode(K,{simpleTable:"",html:n.richtext},null,8,["html"]),n.buttons?.length?(e.openBlock(),e.createElementBlock("div",ee,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.buttons,(_,i)=>(e.openBlock(),e.createBlock(B,e.mergeProps({btnStyle:n.settings?.buttonStyle,key:i},{ref_for:!0},_),null,16,["btnStyle"]))),128))])):e.createCommentVNode("",!0)])])],2))}}},Symbol.toStringTag,{value:"Module"}))})(Vue);
//# sourceMappingURL=hooks.iife.js.map
