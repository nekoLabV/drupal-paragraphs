(function(e){"use strict";const w={countdown:()=>Promise.resolve().then(()=>C),timeline:()=>Promise.resolve().then(()=>U),textWithEmbed:()=>Promise.resolve().then(()=>ne)},E=async(t,n,s)=>{if(!w[t]){console.error(`组件 ${t} 未注册`);return}const r=await w[t](),a=e.createApp(r.default||r,s);return a.mount(n),a};typeof window<"u"&&(window.vueMountComponent=E);const y=(t,n)=>{if(!t)throw new Error("customEvent: name is required.");return new CustomEvent(t,{detail:n})};(function(t,n){t.behaviors.countdown={attach:function(s,r){window.dispatchEvent(y("countdown:load",r.countdown))}},t.behaviors.timeline={attach:function(s,r){window.dispatchEvent(y("timeline:load",r.timeline))}},t.behaviors.textWithEmbed={attach:function(s,r){window.dispatchEvent(y("textWithEmbed:load",r.textWithEmbed))}}})(Drupal,drupalSettings);const T={class:"base-theme-countdown__container"},x={class:"base-theme-countdown-item__num"},$={class:"base-theme-countdown-item__text"},C=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"countdown",props:{start:String,end:{type:String,required:!0},text:{type:String,default:"Day|Hour|Min|Sec"},countdownStyle:{type:String,default:"block"}},emits:["countdownEnd"],setup(t,{emit:n}){const s=t,r=n,a=e.ref(!1),i=(l,h,u)=>Number(l)!=1?u:h,_=l=>/^[\u4e00-\u9fa5]+$/.test(l),c=l=>/^[A-Z]$/.test(l),p=l=>_(l)?l:l+(c(l.substr(1,1))?"S":"s"),k=l=>{let[h,u,f,S]=[0,0,0,0];l>0&&(h=parseInt(l/60/60/24),u=parseInt(l/60/60%24),f=parseInt(l/60%60),S=parseInt(l%60));const oe=le=>String(le).padStart(2,"0");return[h,u,f,S].map(oe)},b=e.ref(0),m=e.ref([]),d=e.ref([]),o=e.computed(()=>k(b.value)),g=(l,h)=>i(Number(l),m.value[h],d.value[h]);return e.onMounted(()=>{if(a.value=!0,!s.end){console.error("Countdown end time is required."),r("countdownEnd");return}const l=new Date(s.end).getTime(),h=s.start?new Date(s.start).getTime():Date.now();if(b.value=Math.floor((l-h)/1e3),b.value<=0){r("countdownEnd");return}m.value=s.text.split("|").map(f=>f.trim()),d.value=m.value.map(p);const u=setInterval(()=>{b.value<=0&&(clearInterval(u),r("countdownEnd")),b.value--},1e3);e.onUnmounted(()=>clearInterval(u))}),(l,h)=>a.value?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["base-theme-countdown",`base-theme-countdown--style-${t.countdownStyle}`])},[e.createElementVNode("div",T,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(u,f)=>(e.openBlock(),e.createElementBlock("div",{key:f,class:"base-theme-countdown-item"},[e.createElementVNode("span",x,e.toDisplayString(u),1),e.createElementVNode("span",$,e.toDisplayString(g(u,f)),1)]))),128))])],2)):e.createCommentVNode("",!0)}}},Symbol.toStringTag,{value:"Module"})),N=["data-node-type"],V={class:"btn__label"},B={__name:"CallToActionBtn",props:{type:{type:String,required:!0},text:String,size:String,btnStyle:{type:String,default:"outline-primary"},href:String,target:String,downloadFileName:{type:String,default:""},nodeType:String,iconSettings:{type:Object,default:()=>({custom_icon:"",show_icon:!0,icon_position:"before"})}},setup(t){const n=t,s=e.computed(()=>n.iconSettings.show_icon),r=e.computed(()=>n.iconSettings.custom_icon?"ri-"+n.iconSettings.custom_icon:""),a=e.computed(()=>n.iconSettings.icon_position),i=e.computed(()=>{let{href:p}=n;return p.startsWith("http")||p.startsWith("/")?p:p="/"+p}),_={link:()=>({href:i.value,target:n.target||n.href.startsWith("http")?"_blank":"_self","data-node-type":n.nodeType}),mail:()=>({href:`mailto:${n.href}`,target:n.target}),phone:()=>({href:`tel:${n.href}`,target:n.target}),sms:()=>({href:`sms:${n.href}`,target:n.target}),download:()=>({href:n.href,download:n.downloadFileName,target:"_blank"})},c=e.computed(()=>_[n.type]?.()||{});return(p,k)=>t.text&&t.href?(e.openBlock(),e.createElementBlock("a",e.mergeProps({key:0,class:"btn"},c.value,{class:`btn--${t.btnStyle} ${t.size?`btn--${t.size}`:""}`,"data-node-type":t.nodeType}),[s.value&&a.value==="before"?(e.openBlock(),e.createElementBlock("i",{key:0,class:e.normalizeClass(["btn__icon",r.value||`btn__icon--${t.type}`])},null,2)):e.createCommentVNode("",!0),e.createElementVNode("span",V,e.toDisplayString(t.text),1),s.value&&a.value==="after"?(e.openBlock(),e.createElementBlock("i",{key:1,class:e.normalizeClass(["btn__icon",r.value||`btn__icon--${t.type}`])},null,2)):e.createCommentVNode("",!0)],16,N)):e.createCommentVNode("",!0)}},L={class:"base-theme-timeline"},M={class:"base-theme-timeline__tools"},D={class:"base-theme-timeline__dropdown-menu"},P=["onClick"],z=["innerHTML"],H={key:0,class:"base-theme-timeline__dates"},j=["onClick"],F={key:0,class:"base-theme-timeline-item__time"},A={key:1,class:"base-theme-timeline-item__hint-text"},I={class:"base-theme-timeline-item__primary"},O={key:0,class:"base-theme-timeline-item__title"},W={key:1,class:"base-theme-timeline-item__subtitle"},q=["innerHTML"],J={key:3,class:"base-theme-timeline-item__tags"},Z={key:4,class:"base-theme-links base-theme-links--direction-row base-theme-timeline-item__actions",style:{"justify-content":"inherit"}},U=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"timeline",props:{items:{type:Array,default:()=>[]},buttonStyle:{type:String,default:"outline-primary"},allTags:{type:String,default:"All"},results:{type:String,default:"@count results"}},setup(t){const n=t,s=e.ref(),r=e.computed(()=>{const m=[...new Set(n.items?.map(d=>d.date))].filter(Boolean);return s.value=m?.[0],m}),a=m=>{s.value=m},i=e.ref(),_=e.computed(()=>{const m=[...new Set(n.items?.reduce((d,o)=>d.concat(o.tags),[]))].filter(Boolean);return m?.unshift(n.allTags),i.value=m?.[0],m}),c=e.ref(!0),p=()=>{setTimeout(()=>{c.value=!0},300)},k=e.computed(()=>n.items?.filter(m=>i.value===n.allTags?m.date===s.value:m.date===s.value&&m.tags.includes(i.value))),b=e.computed(()=>n.results.replace("@count",`<span class="base-theme-timeline__results-num">${k.value?.length}</span>`));return(m,d)=>(e.openBlock(),e.createElementBlock("div",L,[e.createElementVNode("div",M,[_.value?.length?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["base-theme-timeline__dropdown",{"base-theme-timeline__dropdown-menu--hidden":c.value}])},[e.createElementVNode("input",{type:"text",class:"base-theme-timeline__control",onFocus:d[0]||(d[0]=()=>{c.value=!1}),onBlur:p},null,32),e.createTextVNode(" "+e.toDisplayString(i.value)+" ",1),d[1]||(d[1]=e.createStaticVNode('<div class="base-theme-timeline__dropdown-icon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="18" height="18" viewBox="0 0 18 18"><defs><clipPath id="master_svg0_745_72570/556_024318"><rect x="0" y="0" width="18" height="18" rx="0"></rect></clipPath></defs><g clip-path="url(#master_svg0_745_72570/556_024318)"><g><path d="M9,12L4.5,7.5L13.5,7.5L9,12Z" fill="#666666" fill-opacity="1"></path></g></g></svg></div>',1)),e.createElementVNode("div",D,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(_.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{key:g,class:e.normalizeClass(["base-theme-timeline__dropdown-menu__item",{"base-theme-timeline__dropdown-menu__item--active":o===i.value}]),onClick:l=>i.value=o},e.toDisplayString(o),11,P))),128))])],2)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"base-theme-timeline__results",innerHTML:b.value},null,8,z)]),r.value?.length?(e.openBlock(),e.createElementBlock("div",H,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["base-theme-timeline__dates-item",{"base-theme-timeline__dates-item--active":o===s.value}]),key:g,onClick:l=>a(o)},e.toDisplayString(o),11,j))),128))])):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(k.value,(o,g)=>(e.openBlock(),e.createElementBlock("div",{class:"base-theme-timeline-item",key:g},[o?.startTime&&o?.endTime?(e.openBlock(),e.createElementBlock("div",F,e.toDisplayString(`${o.startTime}-${o.endTime}`),1)):(e.openBlock(),e.createElementBlock("div",A,e.toDisplayString(o.hintText),1)),e.createElementVNode("div",I,[d[2]||(d[2]=e.createElementVNode("div",{class:"base-theme-timeline-item__tail"},null,-1)),d[3]||(d[3]=e.createElementVNode("div",{class:"base-theme-timeline-item__node"},null,-1)),o?.title?(e.openBlock(),e.createElementBlock("div",O,e.toDisplayString(o.title),1)):e.createCommentVNode("",!0),o?.subTitle?(e.openBlock(),e.createElementBlock("div",W,e.toDisplayString(o.subTitle),1)):e.createCommentVNode("",!0),o?.description?(e.openBlock(),e.createElementBlock("div",{key:2,innerHTML:o.description,class:"base-theme-timeline-item__description"},null,8,q)):e.createCommentVNode("",!0),o?.tags?.length?(e.openBlock(),e.createElementBlock("div",J,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.tags,(l,h)=>(e.openBlock(),e.createElementBlock("div",{class:"base-theme-timeline-item__tags-item",key:h},e.toDisplayString(l),1))),128))])):e.createCommentVNode("",!0),o?.buttons?.length?(e.openBlock(),e.createElementBlock("div",Z,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.buttons,(l,h)=>(e.openBlock(),e.createBlock(B,e.mergeProps({ref_for:!0},l,{key:h,"btn-style":t.buttonStyle}),null,16,["btn-style"]))),128))])):e.createCommentVNode("",!0)])]))),128))]))}}},Symbol.toStringTag,{value:"Module"})),R=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),G=["innerHTML"],K={__name:"LongText",props:{html:String,className:{type:String,default:""}},setup(t){return(n,s)=>t.html?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["cm-richtext",t.className]),innerHTML:t.html},null,10,G)):e.createCommentVNode("",!0)}},Q={__name:"Richtext",props:{html:{type:String,required:!0},fullTable:{type:Boolean,default:!1},simpleTable:{type:Boolean,default:!1}},setup(t){const n=t,s=e.computed(()=>n.fullTable?n.html.replace(/<table([^>]*)>/g,'<div class="table-responsive"><table$1>').replace(/<\/table>/g,"</table></div>"):n.html);return(r,a)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["base-theme-richtext",{"base-theme-richtext--full-table":t.fullTable,"base-theme-richtext--simple-table":t.simpleTable}])},[e.createVNode(K,{class:"change-theme-primary",html:s.value},null,8,["html"])],2))}},X={class:"base-theme-text-with-embedding__grid"},Y={class:"base-theme-text-with-embedding__embed"},v=["innerHTML"],ee={class:"base-theme-text-with-embedding__text"},te={key:0,class:"base-theme-links base-theme-links--direction-row",style:{"justify-content":"inherit"}},ne=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"TextWithEmbed",props:{loadJS:String,runJS:String,embedHtml:String,richtext:String,buttons:{type:Array,default:()=>[]},settings:{type:Object,default:()=>({})}},setup(t){const n=t,s=e.computed(()=>{const a=["base-theme-text-with-embedding"];for(let[i,_]of Object.entries(n.settings))i!=="buttonStyle"&&(i=R(i),a.push(`${a[0]}--${i}-${_}`));return a.join(" ")}),r=a=>new Promise((i,_)=>{let c=document.querySelector(`script[src='${a}']`);c||(c=document.createElement("script"),c.type="text/javascript",c.src=a,document.body.appendChild(c)),c.addEventListener("load",()=>i(c)),c.addEventListener("error",p=>_(p))});return e.onMounted(async()=>{try{n.loadJS&&await r(n.loadJS),n.runJS&&new Function(n.runJS)()}catch(a){console.error("脚本执行失败:",a)}}),(a,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(s.value)},[e.createElementVNode("div",X,[e.createElementVNode("div",Y,[e.createElementVNode("div",{class:"el-ratio",innerHTML:t.embedHtml},null,8,v)]),e.createElementVNode("div",ee,[e.createVNode(Q,{simpleTable:"",html:t.richtext},null,8,["html"]),t.buttons?.length?(e.openBlock(),e.createElementBlock("div",te,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.buttons,(_,c)=>(e.openBlock(),e.createBlock(B,e.mergeProps({btnStyle:t.settings?.buttonStyle,key:c},{ref_for:!0},_),null,16,["btnStyle"]))),128))])):e.createCommentVNode("",!0)])])],2))}}},Symbol.toStringTag,{value:"Module"}))})(Vue);
//# sourceMappingURL=hooks.iife.js.map
